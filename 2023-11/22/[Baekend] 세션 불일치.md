### 질문

세션 불일치가 어떨때 일어나나요?

### 내가 한답

세션 불일치는 서버가 단일 서버가 아닐때 발생합니다.
현재 , 서버들은 많은 부하를 감당하기 위해 로드밸런서를 통해 여러 서버들이 분산하여 부하를 처리합니다.
하지만,  각 서버당 세션을 별도로 저장할 시 문제가 발생합니다.

특정 서버에서 저장한 세션은 다른 서버에서 모를수도 있기 때문입니다.

해당 문제를 해결할 방법으로는 
클라이언트가 요청을 하면 해당 클라이언트의 요청은 특정 서버에서 담당하게 하는 것입니다. ( Sticky Session )
하지만 , 로드 밸런싱이 의도한대로 되지 않거나 특정 서버에 과부하를 유래할 수도 있습니다.
특히 , 서버 Fail 시 해당 서버에 붙어있는 세션이 모두 소실될 수 있습니다.



### 이상적인 답

## Session Mismatch

### 발생 이유?

서버가 Scale-out 으로 늘어나며 , 로드밸런싱이 서버의 부하를 담당
특정 서버에서 Session 을 저장 하면 , 다른 서버가 Session 이 저장된 지 모르는 상황 발생!
### Sticky Session

특정 세션의 요청을 처음 처리한 서버로만 전송
#### 단점
- 로드 밸런싱이 의도한대로 동작하지 않을 수 있음
- 특정 서버만 과부하가 올 수 있음
- 특정 서버 Fail 시 해당 서버 부터있는 세션 모두 소실 가능
### Session Clustering

세션 정보를 TCP Socket 으로 서버끼리 공유
#### 단점
- 서버 추가할 때 마다 기존 있는 모든 서버에 대해서도 추가 셋팅 작업 해야함
- 세션 전파 & 복제 해야하므로 서버 수에 따른 트래픽 증가! => 성능 저하 발생
### Session Server
최초 요청 받은 서버가 세션 정보 생성해 외부 저장소에 저장

- 위의 Sticky Session 과 Session Clustering 의 단점 보완
#### 단점
- 세션 저장하고 있는 저장소 자체에 장애 발생할 경우 모든 세션 잃어버릴 수 있음

###  By GPT


### 참고 출처

https://kchanguk.tistory.com/146

https://velog.io/@sweet_sumin/%EC%84%B8%EC%85%98-%EB%B6%88%EC%9D%BC%EC%B9%98-%EC%9D%B4%EC%8A%88
##### Writed By Obisidan